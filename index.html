<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-88">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5">
  <title>–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —ç–∫—Å–ø–µ—Ä—Ç ¬∑ –°–µ–º–µ–π–Ω—ã–π –±—é–¥–∂–µ—Ç –≤ —Ç–µ–Ω–≥–µ</title>
  <!-- Google Font & Font Awesome -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', sans-serif;
    }

    body {
      background: linear-gradient(165deg, #1a3a4b 0%, #1e4e5c 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .game-container {
      max-width: 1300px;
      width: 100%;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(24px);
      -webkit-backdrop-filter: blur(24px);
      box-shadow: 0 35px 68px -20px rgba(6, 30, 34, 0.5);
      border-radius: 48px;
      border: 1px solid rgba(255, 255, 255, 0.6);
      padding: 35px 40px;
    }

    /* –•–µ–¥–µ—Ä —Å –±–∞–ª–∞–Ω—Å–æ–º –∏ –¥–∞—Ç–æ–π */
    .dashboard-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 30px;
      flex-wrap: wrap;
      background: #ffffffee;
      border-radius: 48px;
      padding: 18px 28px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.05);
    }

    .logo-area {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .logo-area i {
      font-size: 2.4rem;
      color: #1f7a6b;
      background: #dcf2ec;
      padding: 12px;
      border-radius: 50%;
    }

    .logo-text h2 {
      font-weight: 800;
      color: #0c4a4a;
      font-size: 1.6rem;
      letter-spacing: -0.5px;
    }

    .logo-text span {
      font-size: 0.9rem;
      color: #4a7c7c;
      font-weight: 500;
      display: block;
    }

    .balance-card {
      background: linear-gradient(135deg, #0a6e5f, #0b8470);
      padding: 16px 32px;
      border-radius: 80px;
      display: flex;
      align-items: center;
      gap: 20px;
      color: white;
      box-shadow: 0 12px 25px #0b5e4e70;
    }

    .balance-item {
      display: flex;
      align-items: baseline;
      gap: 8px;
    }

    .balance-label {
      font-weight: 500;
      opacity: 0.9;
      font-size: 1rem;
    }

    .balance-amount {
      font-weight: 800;
      font-size: 1.9rem;
      letter-spacing: 1px;
    }

    .tenge-badge {
      background: rgba(255,255,255,0.2);
      padding: 6px 14px;
      border-radius: 40px;
      font-weight: 600;
      font-size: 0.9rem;
    }

    /* –û—Å–Ω–æ–≤–Ω–æ–π –≥—Ä–∏–¥ */
    .game-grid {
      display: grid;
      grid-template-columns: 1.5fr 0.9fr 1fr;
      gap: 25px;
      margin-top: 10px;
    }

    /* –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ ‚Äî —Å–æ–±—ã—Ç–∏—è */
    .events-panel {
      background: white;
      border-radius: 36px;
      padding: 26px 24px;
      box-shadow: 0 15px 30px rgba(18, 67, 62, 0.08);
    }

    .section-title {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 700;
      font-size: 1.3rem;
      color: #0f5b53;
      border-bottom: 3px solid #b5dfd3;
      padding-bottom: 16px;
      margin-bottom: 20px;
    }

    .event-card {
      background: #f6fcfb;
      border-radius: 28px;
      padding: 24px;
      margin-bottom: 20px;
      border-left: 12px solid #2b9c8c;
      transition: all 0.2s;
      box-shadow: 0 8px 0 #c1dcd7;
    }

    .event-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .event-category {
      background: #d9eee9;
      padding: 6px 16px;
      border-radius: 50px;
      font-size: 0.75rem;
      font-weight: 700;
      text-transform: uppercase;
      color: #0f6759;
      letter-spacing: 0.5px;
    }

    .event-title {
      font-weight: 800;
      font-size: 1.25rem;
      color: #1b4e48;
    }

    .event-desc {
      color: #2e5c55;
      line-height: 1.6;
      margin-bottom: 22px;
      font-size: 0.98rem;
    }

    .event-impact {
      background: #ecf6f3;
      border-radius: 18px;
      padding: 14px 16px;
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
      font-size: 0.9rem;
      color: #13534a;
      flex-wrap: wrap;
    }

    .impact-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .btn-group {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
    }

    .btn {
      border: none;
      background: white;
      padding: 16px 26px;
      border-radius: 60px;
      font-weight: 700;
      font-size: 0.98rem;
      display: flex;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      transition: 0.15s;
      border: 2px solid transparent;
      box-shadow: 0 6px 0 #b6c9c5;
    }

    .btn-accept {
      background: #1a9b8a;
      color: white;
      box-shadow: 0 6px 0 #0f5e54;
    }
    .btn-accept:hover { background: #138075; transform: translateY(-2px); box-shadow: 0 8px 0 #0f5e54; }

    .btn-decline {
      background: #fff1e0;
      color: #9e6230;
      box-shadow: 0 6px 0 #d6bc9f;
    }
    .btn-decline:hover { background: #ffe2cb; transform: translateY(-2px); box-shadow: 0 8px 0 #c2a180; }

    /* –°—Ä–µ–¥–Ω—è—è –∫–æ–ª–æ–Ω–∫–∞ ‚Äî —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
    .stats-panel {
      background: white;
      border-radius: 36px;
      padding: 26px 24px;
      box-shadow: 0 15px 30px rgba(18, 67, 62, 0.08);
    }

    .stats-list {
      margin-top: 8px;
    }

    .stat-item {
      display: flex;
      justify-content: space-between;
      padding: 16px 0;
      border-bottom: 1px solid #deeeea;
      font-weight: 600;
      color: #165a52;
    }

    .stat-value {
      font-weight: 800;
      color: #0e4f4f;
    }

    .progress-block {
      background: #e0f0ec;
      border-radius: 28px;
      padding: 22px;
      margin-top: 28px;
    }

    .progress-label {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
      font-weight: 600;
      color: #0d5f57;
    }

    .progress-bar-bg {
      background: #c0dbd5;
      height: 18px;
      border-radius: 40px;
      overflow: hidden;
    }

    .progress-fill {
      height: 18px;
      background: linear-gradient(90deg, #319685, #0d7867);
      width: 0%;
      border-radius: 40px;
      transition: width 0.4s ease;
    }

    .forecast-card {
      background: #fdf5e6;
      border-radius: 24px;
      padding: 20px;
      margin-top: 25px;
      border-left: 10px solid #efb253;
    }

    /* –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ ‚Äî –ø–æ—Ä—Ç—Ñ–µ–ª—å, —Å–æ–≤–µ—Ç—ã, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è */
    .portfolio-panel {
      background: white;
      border-radius: 36px;
      padding: 26px 24px;
      box-shadow: 0 15px 30px rgba(18, 67, 62, 0.08);
    }

    .asset-item {
      background: #f3faf8;
      border-radius: 20px;
      padding: 16px;
      margin-bottom: 16px;
    }

    .asset-title {
      font-weight: 700;
      color: #0b6253;
    }

    .badge {
      background: #ffd966;
      padding: 8px 14px;
      border-radius: 50px;
      font-weight: 600;
      font-size: 0.8rem;
      color: #4d3800;
      display: inline-block;
    }

    .advice-box {
      background: #edf2fa;
      border-radius: 22px;
      padding: 22px;
      margin-top: 25px;
      border-bottom: 6px solid #2f95a3;
      font-style: italic;
      color: #134852;
    }

    .restart-btn {
      background: white;
      border: 2px solid #1f8473;
      color: #1f8473;
      padding: 18px;
      border-radius: 60px;
      font-weight: 800;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 14px;
      margin-top: 35px;
      cursor: pointer;
      transition: 0.2s;
    }

    .restart-btn:hover {
      background: #1f8473;
      color: white;
    }

    .feedback-area {
      background: #2a5e5e;
      color: white;
      border-radius: 40px;
      padding: 18px 28px;
      margin-top: 20px;
      font-weight: 500;
    }

    @media (max-width: 1000px) {
      .game-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
<div class="game-container">
  <!-- –•–µ–¥–µ—Ä —Å –±–∞–ª–∞–Ω—Å–æ–º -->
  <div class="dashboard-header">
    <div class="logo-area">
      <i class="fas fa-coins"></i>
      <div class="logo-text">
        <h2>–°–µ–º–µ–π–Ω—ã–π –±—é–¥–∂–µ—Ç ‚Ä¢ TENGE</h2>
        <span>–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —Å–∏–º—É–ª—è—Ç–æ—Ä —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏</span>
      </div>
    </div>
    <div class="balance-card">
      <div class="balance-item">
        <span class="balance-label">–ë–∞–ª–∞–Ω—Å</span>
        <span class="balance-amount" id="balanceDisplay">385 000</span>
        <span class="tenge-badge">‚Ç∏</span>
      </div>
      <div class="balance-item">
        <span class="balance-label">–î–µ–Ω—å</span>
        <span class="balance-amount" id="dayDisplay">1</span>
        <span class="tenge-badge">/30</span>
      </div>
    </div>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π –≥—Ä–∏–¥ -->
  <div class="game-grid">
    <!-- –ö–æ–ª–æ–Ω–∫–∞ 1: —Å–æ–±—ã—Ç–∏—è -->
    <div class="events-panel">
      <div class="section-title">
        <i class="fas fa-bolt"></i> –¢–µ–∫—É—â–µ–µ —Å–æ–±—ã—Ç–∏–µ
      </div>
      <div id="eventContainer"></div>
      <div id="feedbackArea" class="feedback-area">
        üí¨ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–µ–º–µ–π–Ω—ã–º –±—é–¥–∂–µ—Ç–æ–º –≤ —Ç–µ–Ω–≥–µ. –ü—Ä–∏–Ω–∏–º–∞–π—Ç–µ –≤–∑–≤–µ—à–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è.
      </div>
    </div>

    <!-- –ö–æ–ª–æ–Ω–∫–∞ 2: —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ -->
    <div class="stats-panel">
      <div class="section-title">
        <i class="fas fa-chart-pie"></i> –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑
      </div>
      <div class="stats-list">
        <div class="stat-item"><span>üìà –í—Å–µ–≥–æ –¥–æ—Ö–æ–¥–æ–≤</span> <span class="stat-value" id="totalIncomeValue">0 ‚Ç∏</span></div>
        <div class="stat-item"><span>üìâ –í—Å–µ–≥–æ —Ä–∞—Å—Ö–æ–¥–æ–≤</span> <span class="stat-value" id="totalExpenseValue">0 ‚Ç∏</span></div>
        <div class="stat-item"><span>üíé –°–±–µ—Ä–µ–∂–µ–Ω–∏—è</span> <span class="stat-value" id="savingsValue">0 ‚Ç∏</span></div>
        <div class="stat-item"><span>‚öñÔ∏è –ë–∞–ª–∞–Ω—Å –æ–ø–µ—Ä–∞—Ü–∏–π</span> <span class="stat-value" id="netBalanceValue">0 ‚Ç∏</span></div>
      </div>

      <div class="progress-block">
        <div class="progress-label">
          <span>üõ°Ô∏è –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –ø–æ–¥—É—à–∫–∞</span>
          <span id="cushionPercent">0%</span>
        </div>
        <div class="progress-bar-bg">
          <div class="progress-fill" id="cushionProgress" style="width: 0%;"></div>
        </div>
        <p style="margin-top: 15px; color: #0b6e63; font-weight: 600;"><i class="fas fa-target"></i> –¶–µ–ª—å: 6 –º–µ—Å—è—Ü–µ–≤ —Ä–∞—Å—Ö–æ–¥–æ–≤</p>
      </div>

      <div class="forecast-card" id="forecastBlock">
        <strong><i class="fas fa-chart-line"></i> –ü—Ä–æ–≥–Ω–æ–∑ –±–∞–ª–∞–Ω—Å–∞</strong>
        <p style="font-size: 1.7rem; font-weight: 800; color: #1c7c6c;" id="forecastValue">385 000 ‚Ç∏</p>
        <p style="color: #4e6b68;" id="forecastText">–¢–µ–∫—É—â–∞—è —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–∞</p>
      </div>
    </div>

    <!-- –ö–æ–ª–æ–Ω–∫–∞ 3: –∞–∫—Ç–∏–≤—ã –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è -->
    <div class="portfolio-panel">
      <div class="section-title">
        <i class="fas fa-rocket"></i> –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ & —Ä–µ–∑–µ—Ä–≤—ã
      </div>
      <div id="investmentPortfolio">
        <div class="asset-item">
          <div style="display: flex; justify-content: space-between;">
            <span class="asset-title"><i class="fas fa-piggy-bank"></i> –î–µ–ø–æ–∑–∏—Ç</span>
            <span style="font-weight: 800;" id="depositAmount">0 ‚Ç∏</span>
          </div>
          <div style="font-size: 0.8rem; color: #2d7a6e;">–ù–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—ã–π —Å—á–µ—Ç, 12% –≥–æ–¥–æ–≤—ã—Ö</div>
        </div>
        <div class="asset-item">
          <div style="display: flex; justify-content: space-between;">
            <span class="asset-title"><i class="fas fa-graduation-cap"></i> –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</span>
            <span style="font-weight: 800;" id="educationFund">0 ‚Ç∏</span>
          </div>
          <div style="font-size: 0.8rem; color: #2d7a6e;">–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π –∫–∞–ø–∏—Ç–∞–ª</div>
        </div>
      </div>
      
      <div id="achievementContainer" style="margin-top: 15px;"></div>
      
      <div class="advice-box" id="dynamicAdvice">
        <i class="fas fa-lightbulb"></i> –°–æ–≤–µ—Ç: —Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å –æ—Ç–∫–ª–∞–¥—ã–≤–∞—Ç—å –º–∏–Ω–∏–º—É–º 20% –æ—Ç –¥–æ—Ö–æ–¥–æ–≤.
      </div>
      
      <button class="restart-btn" id="restartButton">
        <i class="fas fa-rotate-left"></i> –ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∫–∞–º–ø–∞–Ω–∏—é
      </button>
    </div>
  </div>
</div>

<script>
  (function(){
    "use strict";

    // ================ –ü–û–õ–ù–û–¶–ï–ù–ù–ê–Ø –§–ò–ù–ê–ù–°–û–í–ê–Ø –ò–ì–†–ê –í –¢–ï–ù–ì–ï ================
    // –°—Ü–µ–Ω–∞—Ä–∏–∏ —Å –≥–ª—É–±–æ–∫–∏–º–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º–∏ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è–º–∏, –æ–±—É—á–µ–Ω–∏–µ –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç–∏
    
    const MONTHLY_EXPENSE = 185000; // —Å—Ä–µ–¥–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥—ã —Å–µ–º—å–∏ –≤ –º–µ—Å—è—Ü (—Ç–µ–Ω–≥–µ)
    const INITIAL_BALANCE = 385000;
    const MAX_DAY = 30; // –º–µ—Å—è—Ü —Å–∏–º—É–ª—è—Ü–∏–∏

    // –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å–æ–±—ã—Ç–∏–π ‚Äî —Ä–µ–∞–ª—å–Ω—ã–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏
    const SCENARIOS = [
      {
        id: 1,
        title: "–ö—Ä—É–ø–Ω–∞—è –±—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞",
        description: "–•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫ –≤—ã—à–µ–ª –∏–∑ —Å—Ç—Ä–æ—è. –ù–æ–≤—ã–π —Å—Ç–æ–∏—Ç 220 000 ‚Ç∏, –Ω–æ –º–æ–∂–Ω–æ –≤–∑—è—Ç—å –≤ —Ä–∞—Å—Å—Ä–æ—á–∫—É –±–µ–∑ –ø–µ—Ä–µ–ø–ª–∞—Ç—ã –Ω–∞ 6 –º–µ—Å—è—Ü–µ–≤. –ï—Å—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç –∫—É–ø–∏—Ç—å –±/—É –∑–∞ 95 000 ‚Ç∏ —Å —Ä–∏—Å–∫–æ–º —Ä–µ–º–æ–Ω—Ç–∞.",
        category: "–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–∞—Ç—ã",
        accept: { 
          text: "‚úÖ –ö—É–ø–∏—Ç—å –Ω–æ–≤—ã–π –≤ —Ä–∞—Å—Å—Ä–æ—á–∫—É", 
          budgetChange: 0, // –ø–µ—Ä–≤—ã–π –ø–ª–∞—Ç—ë–∂ 0?
          expense: 0,
          installment: { monthly: 36667, months: 6 } 
        },
        decline: { 
          text: "üîÑ –ë/—É + —Ä–µ–º–æ–Ω—Ç", 
          budgetChange: -95000, 
          expense: 95000,
          risk: 0.4, // –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–æ–ø —Ä–∞—Å—Ö–æ–¥–æ–≤
        },
        advice: "–†–∞—Å—Å—Ä–æ—á–∫–∞ –±–µ–∑ –ø–µ—Ä–µ–ø–ª–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å. –ë/—É —Ä–∏—Å–∫–æ–≤–∞–Ω."
      },
      {
        id: 2,
        title: "–ü—Ä–µ–º–∏—è –∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏",
        description: "–í–∞–º –≤—ã–ø–ª–∞—Ç–∏–ª–∏ –ø—Ä–µ–º–∏—é 140 000 ‚Ç∏. –ú–æ–∂–Ω–æ –ø–æ–ª–æ–∂–∏—Ç—å –Ω–∞ –¥–µ–ø–æ–∑–∏—Ç (12% –≥–æ–¥–æ–≤—ã—Ö), –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –æ–±—É—á–µ–Ω–∏–µ –∏–ª–∏ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –Ω–∞ –æ—Ç–ø—É—Å–∫.",
        category: "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥",
        accept: { 
          text: "üè¶ –î–µ–ø–æ–∑–∏—Ç", 
          budgetChange: -140000, // –ø–µ—Ä–µ–≤–æ–¥–∏–º –≤ –¥–µ–ø–æ–∑–∏—Ç
          expense: 0,
          income: 0,
          depositAdd: 140000
        },
        decline: { 
          text: "üìö –ö—É—Ä—Å—ã –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ", 
          budgetChange: -65000, 
          expense: 65000,
          educationAdd: 65000,
          futureIncome: 18000 // –ø—Ä–∏–±–∞–≤–∫–∞ –∫ –¥–æ—Ö–æ–¥—É —á–µ—Ä–µ–∑ 5 –¥–Ω–µ–π
        },
        advice: "–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø–æ–≤—ã—à–∞—é—Ç –±—É–¥—É—â–∏–π –¥–æ—Ö–æ–¥."
      },
      {
        id: 3,
        title: "–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞",
        description: "–†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –î–ú–° –¥–ª—è —Å–µ–º—å–∏ –∑–∞ 55 000 ‚Ç∏ –≤ –≥–æ–¥. –ú–æ–∂–Ω–æ –æ–ø–ª–∞—Ç–∏—Ç—å —Å–µ–π—á–∞—Å. –û—Ç–∫–∞–∑ —Å—ç–∫–æ–Ω–æ–º–∏—Ç –¥–µ–Ω—å–≥–∏, –Ω–æ –Ω–µ—Å—ë—Ç —Ä–∏—Å–∫–∏.",
        category: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏",
        accept: { text: "ü©∫ –û—Ñ–æ—Ä–º–∏—Ç—å —Å—Ç—Ä–∞—Ö–æ–≤–∫—É", budgetChange: -55000, expense: 55000, riskReduction: true },
        decline: { text: "‚ö†Ô∏è –û—Ç–∫–∞–∑–∞—Ç—å—Å—è", budgetChange: 0, expense: 0, healthRisk: true },
        advice: "–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ ‚Äî –æ—Å–Ω–æ–≤–∞ —Ñ–∏–Ω. –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏."
      },
      {
        id: 4,
        title: "–ê–≤—Ç–æ–º–æ–±–∏–ª—å: —Ä–µ–º–æ–Ω—Ç –∏–ª–∏ –ø—Ä–æ–¥–∞–∂–∞?",
        description: "–ê–≤—Ç–æ —Ç—Ä–µ–±—É–µ—Ç —Ä–µ–º–æ–Ω—Ç–∞ –Ω–∞ 210 000 ‚Ç∏. –†—ã–Ω–æ—á–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∞–≤—Ç–æ 950 000 ‚Ç∏. –ú–æ–∂–Ω–æ –ø—Ä–æ–¥–∞—Ç—å –∏ –ø–µ—Ä–µ—Å–µ—Å—Ç—å –Ω–∞ –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç, –ª–∏–±–æ –æ—Ç—Ä–µ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å.",
        category: "–ö—Ä—É–ø–Ω—ã–µ —Ç—Ä–∞—Ç—ã",
        accept: { text: "üîß –û—Ç—Ä–µ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å", budgetChange: -210000, expense: 210000 },
        decline: { text: "üöå –ü—Ä–æ–¥–∞—Ç—å –∏ –±–µ–∑ –∞–≤—Ç–æ", budgetChange: 950000, income: 950000, expense: 0, sellCar: true },
        advice: "–ü—Ä–æ–¥–∞–∂–∞ –Ω–µ–ª–∏–∫–≤–∏–¥–Ω–æ–≥–æ –∞–∫—Ç–∏–≤–∞ —Å–Ω–∏–∂–∞–µ—Ç —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –±–µ–Ω–∑–∏–Ω –∏ —Ä–µ–º–æ–Ω—Ç."
      },
      {
        id: 5,
        title: "–†–æ—Å—Ç –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π",
        description: "–ö–≤–∏—Ç–∞–Ω—Ü–∏–∏ –≤—ã—Ä–æ—Å–ª–∏ –Ω–∞ 35%. –°—Ä–µ–¥–Ω–∏–π —Å—á—ë—Ç —Ç–µ–ø–µ—Ä—å 47 000 ‚Ç∏ –≤–º–µ—Å—Ç–æ 35 000. –ù—É–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –ø—Ä–∏–Ω—è—Ç—å.",
        category: "–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã",
        accept: { text: "üí° –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—á—ë—Ç—á–∏–∫–∏ –∏ —É—Ç–µ–ø–ª–∏—Ç—å", budgetChange: -80000, expense: 80000, utilitySave: true },
        decline: { text: "üí∏ –û–ø–ª–∞—á–∏–≤–∞—Ç—å –ø–æ —Å—á–µ—Ç–∞–º", budgetChange: 0, expense: 0, penalty: "higherUtility" },
        advice: "–≠–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –æ–∫—É–ø–∞–µ—Ç—Å—è –∑–∞ 2-3 –≥–æ–¥–∞."
      },
      {
        id: 6,
        title: "–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞: –¥—Ä—É–≥ —Å–µ–º—å–∏ —Å–æ–≤–µ—Ç—É–µ—Ç",
        description: "–ó–Ω–∞–∫–æ–º—ã–π –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤–ª–æ–∂–∏—Ç—å 120 000 ‚Ç∏ –≤ ¬´–ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã–π —Ç–æ–∫–µ–Ω¬ª. –í—ã—Å–æ–∫–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å, –Ω–æ –æ—á–µ–Ω—å —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ.",
        category: "–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏",
        accept: { text: "üìà –ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å", budgetChange: -120000, expense: 120000, cryptoRisk: true },
        decline: { text: "‚õî –û—Ç–∫–∞–∑–∞—Ç—å—Å—è", budgetChange: 0, expense: 0 },
        advice: "–†–∏—Å–∫–æ–≤–∞–Ω–Ω—ã–µ –∞–∫—Ç–∏–≤—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–µ–≤—ã—à–∞—Ç—å 5% –ø–æ—Ä—Ç—Ñ–µ–ª—è."
      },
      {
        id: 7,
        title: "–†–µ–±—ë–Ω–æ–∫ —Ö–æ—á–µ—Ç –ø–æ—Å—Ç—É–ø–∞—Ç—å –≤ –≤—É–∑",
        description: "–ù—É–∂–Ω–æ –æ–ø–ª–∞—Ç–∏—Ç—å –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã ‚Äî 145 000 ‚Ç∏. –≠—Ç–æ –ø–æ–≤—ã—Å–∏—Ç —à–∞–Ω—Å—ã –Ω–∞ –≥—Ä–∞–Ω—Ç –∏ —Å—ç–∫–æ–Ω–æ–º–∏—Ç –≤ –±—É–¥—É—â–µ–º.",
        category: "–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ",
        accept: { text: "üéì –û–ø–ª–∞—Ç–∏—Ç—å –∫—É—Ä—Å—ã", budgetChange: -145000, expense: 145000, educationAdd: 145000 },
        decline: { text: "‚è≥ –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞", budgetChange: 0, expense: 0 },
        advice: "–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ ‚Äî –ª—É—á—à–∏–π –∞–∫—Ç–∏–≤."
      },
      {
        id: 8,
        title: "–°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞—Ä–ø–ª–∞—Ç—ã –∏–∑-–∑–∞ –∫—Ä–∏–∑–∏—Å–∞",
        description: "–í–∞—à –¥–æ—Ö–æ–¥ —Å–æ–∫—Ä–∞—Ç–∏–ª—Å—è –Ω–∞ 25% ‚Äî –º–∏–Ω—É—Å 95 000 ‚Ç∏ –≤ –º–µ—Å—è—Ü. –ü–µ—Ä–µ—Å–º–æ—Ç—Ä–∏—Ç–µ –±—é–¥–∂–µ—Ç.",
        category: "–ö—Ä–∏–∑–∏—Å",
        accept: { text: "‚úÇÔ∏è –°–æ–∫—Ä–∞—Ç–∏—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ 30%", budgetChange: 0, expense: 0, budgetOptimize: true },
        decline: { text: "üîÑ –ò—Å–∫–∞—Ç—å –ø–æ–¥—Ä–∞–±–æ—Ç–∫—É", budgetChange: 0, income: 0, sideJob: true }, // sidejob —á–µ—Ä–µ–∑ –¥–µ–Ω—å
        advice: "–í –∫—Ä–∏–∑–∏—Å –≤–∞–∂–Ω—ã –∏ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Ç—Ä–∞—Ç, –∏ –Ω–æ–≤—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏."
      }
    ];

    // ---------- –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ) ----------
    let state = {
      balance: INITIAL_BALANCE,
      day: 1,
      totalIncome: 0,
      totalExpense: 0,
      deposit: 0,
      educationFund: 0,
      monthlyExpenses: MONTHLY_EXPENSE,
      passiveIncomePerDay: 0,
      futureIncomeBoost: 0,
      healthInsurance: false,
      carOwned: true,
      utilitySmart: false,
      // –∏—Å—Ç–æ—Ä–∏—è
      scenariosUsed: [],
      maxDays: MAX_DAY
    };

    let availableScenarios = [];

    // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
    const balanceDisplay = document.getElementById('balanceDisplay');
    const dayDisplay = document.getElementById('dayDisplay');
    const totalIncomeValue = document.getElementById('totalIncomeValue');
    const totalExpenseValue = document.getElementById('totalExpenseValue');
    const savingsValue = document.getElementById('savingsValue');
    const netBalanceValue = document.getElementById('netBalanceValue');
    const cushionPercent = document.getElementById('cushionPercent');
    const cushionProgress = document.getElementById('cushionProgress');
    const forecastValue = document.getElementById('forecastValue');
    const forecastText = document.getElementById('forecastText');
    const depositAmount = document.getElementById('depositAmount');
    const educationFundSpan = document.getElementById('educationFund');
    const eventContainer = document.getElementById('eventContainer');
    const feedbackArea = document.getElementById('feedbackArea');
    const achievementContainer = document.getElementById('achievementContainer');
    const dynamicAdvice = document.getElementById('dynamicAdvice');
    const restartButton = document.getElementById('restartButton');

    // ---------- –§–æ—Ä–º–∞—Ç —Ç–µ–Ω–≥–µ ----------
    function formatKZT(amount) {
      return amount.toLocaleString('ru-RU') + ' ‚Ç∏';
    }

    // ---------- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ ----------
    function refreshUI() {
      balanceDisplay.textContent = Math.round(state.balance).toLocaleString('ru-RU');
      dayDisplay.textContent = state.day;

      totalIncomeValue.textContent = formatKZT(state.totalIncome);
      totalExpenseValue.textContent = formatKZT(state.totalExpense);
      
      let savings = state.balance - INITIAL_BALANCE + state.totalExpense;
      savingsValue.textContent = formatKZT(Math.max(0, savings));
      
      let net = state.totalIncome - state.totalExpense;
      netBalanceValue.textContent = formatKZT(net);

      // –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –ø–æ–¥—É—à–∫–∞ (–º–µ—Å—è—á–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã)
      let cushionMonths = state.balance / MONTHLY_EXPENSE;
      let percent = Math.min(100, (state.balance / (MONTHLY_EXPENSE * 6)) * 100);
      cushionProgress.style.width = percent + '%';
      cushionPercent.textContent = cushionMonths.toFixed(1) + ' –º–µ—Å.';

      // –ü—Ä–æ–≥–Ω–æ–∑ –±–∞–ª–∞–Ω—Å–∞ —á–µ—Ä–µ–∑ 30 –¥–Ω–µ–π (—É–ø—Ä–æ—â—ë–Ω–Ω–æ)
      let avgDailyCashflow = (state.totalIncome - state.totalExpense) / state.day;
      let forecastBalance = state.balance + avgDailyCashflow * (MAX_DAY - state.day);
      if (forecastBalance < 0) forecastBalance = 0;
      forecastValue.textContent = formatKZT(Math.round(forecastBalance));
      
      if (forecastBalance > state.balance) forecastText.innerHTML = 'üìà –¢–µ–Ω–¥–µ–Ω—Ü–∏—è —Ä–æ—Å—Ç–∞';
      else if (forecastBalance < state.balance) forecastText.innerHTML = 'üìâ –¢–µ–Ω–¥–µ–Ω—Ü–∏—è —Å–Ω–∏–∂–µ–Ω–∏—è';
      else forecastText.innerHTML = '‚öñÔ∏è –°—Ç–∞–±–∏–ª—å–Ω–æ';

      // –ü–æ—Ä—Ç—Ñ–µ–ª—å
      depositAmount.textContent = formatKZT(state.deposit);
      educationFundSpan.textContent = formatKZT(state.educationFund);
    }

    // ---------- –°–æ–≤–µ—Ç—ã –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è (—Ñ–∏–Ω.–≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å) ----------
    function updateAdviceAndAchievements() {
      let advice = '';
      if (state.balance < MONTHLY_EXPENSE * 3) {
        advice = '‚ö†Ô∏è –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –ø–æ–¥—É—à–∫–∞ –º–µ–Ω—å—à–µ 3 –º–µ—Å—è—Ü–µ–≤. –ü–æ—Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å —Å–æ–∫—Ä–∞—Ç–∏—Ç—å —Ä–∞—Å—Ö–æ–¥—ã.';
      } else if (state.deposit > 200000) {
        advice = '‚úÖ –û—Ç–ª–∏—á–Ω–æ! –î–µ–ø–æ–∑–∏—Ç –ø—Ä–∏–Ω–æ—Å–∏—Ç –ø–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥.';
      } else if (state.educationFund > 100000) {
        advice = 'üéì –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ ‚Äî –∑–∞–ª–æ–≥ —Ä–æ—Å—Ç–∞ –¥–æ—Ö–æ–¥–æ–≤.';
      } else {
        advice = 'üí° –°—Ç–∞—Ä–∞–π—Ç–µ—Å—å –æ—Ç–∫–ª–∞–¥—ã–≤–∞—Ç—å 20% –¥–æ—Ö–æ–¥–∞ –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ä–µ–∑–µ—Ä–≤—ã.';
      }
      dynamicAdvice.innerHTML = `<i class="fas fa-lightbulb"></i> ${advice}`;

      // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
      let ach = '';
      if (state.balance >= 600000) ach += '<div class="badge">üèÜ –ù–∞–∫–æ–ø–ª–µ–Ω–æ 600K ‚Ç∏ ‚Äî —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å</div>';
      if (state.deposit >= 250000) ach += '<div class="badge">üí∞ –ò–Ω–≤–µ—Å—Ç–æ—Ä: –¥–µ–ø–æ–∑–∏—Ç 250K+</div>';
      if (state.educationFund >= 150000) ach += '<div class="badge">üìö –ó–Ω–∞–Ω–∏—è ‚Äî —Å–∏–ª–∞: 150K –≤ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏</div>';
      if (state.day >= 25 && state.balance > INITIAL_BALANCE) ach += '<div class="badge">‚è≥ –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞: –º–µ—Å—è—Ü –±–µ–∑ –¥–æ–ª–≥–æ–≤</div>';
      achievementContainer.innerHTML = ach;
    }

    // ---------- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ —Å–æ–±—ã—Ç–∏—è ----------
    function applyScenarioEffects(scenario, choice) {
      const decision = scenario[choice];
      
      // –ë–∞–∑–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
      if (decision.budgetChange) state.balance += decision.budgetChange;
      if (decision.income) { state.totalIncome += decision.income; state.balance += decision.income; }
      if (decision.expense) { state.totalExpense += decision.expense; }
      
      // –î–µ–ø–æ–∑–∏—Ç
      if (decision.depositAdd) {
        state.deposit += decision.depositAdd;
        state.balance -= decision.depositAdd; // –ø–µ—Ä–µ–º–µ—â–∞–µ–º –≤ –¥–µ–ø–æ–∑–∏—Ç
      }
      
      // –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
      if (decision.educationAdd) {
        state.educationFund += decision.educationAdd;
      }
      
      // –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥ / –ø—Ä–æ—Ü–µ–Ω—Ç—ã –ø–æ –¥–µ–ø–æ–∑–∏—Ç—É
      if (state.deposit > 0) {
        let dailyPercent = 0.12 / 365; // 12% –≥–æ–¥–æ–≤—ã—Ö
        let interest = Math.floor(state.deposit * dailyPercent * 3); // –∫–∞–∂–¥—ã–µ 3 –¥–Ω—è
        if (state.day % 3 === 0 && state.day > 1) {
          state.balance += interest;
          state.totalIncome += interest;
          feedbackArea.innerHTML += `<br>üè¶ –ù–∞—á–∏—Å–ª–µ–Ω –¥–µ–ø–æ–∑–∏—Ç–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç: +${formatKZT(interest)}`;
        }
      }

      // –°–ø–µ—Ü—ç—Ñ—Ñ–µ–∫—Ç—ã: —Ä–∞—Å—Å—Ä–æ—á–∫–∞
      if (decision.installment) {
        let monthly = decision.installment.monthly;
        for (let i = 0; i < decision.installment.months; i++) {
          if (state.day + i <= MAX_DAY) {
            setTimeout(() => {
              state.balance -= monthly;
              state.totalExpense += monthly;
              refreshUI();
              feedbackArea.innerHTML = `üí≥ –ü–ª–∞—Ç—ë–∂ –ø–æ —Ä–∞—Å—Å—Ä–æ—á–∫–µ: -${formatKZT(monthly)}`;
            }, 50 * i); // —Å–∏–º—É–ª—è—Ü–∏—è
          }
        }
      }

      // –û–±—É—á–µ–Ω–∏–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –±—É–¥—É—â–∏–π –¥–æ—Ö–æ–¥
      if (decision.futureIncome) {
        state.futureIncomeBoost += decision.futureIncome;
        // –∫–∞–∂–¥—ã–µ 5 –¥–Ω–µ–π –±–æ–Ω—É—Å
      }

      // –ü—Ä–æ–¥–∞–∂–∞ –∞–≤—Ç–æ
      if (decision.sellCar) {
        state.carOwned = false;
        state.monthlyExpenses -= 18000; // —ç–∫–æ–Ω–æ–º–∏—è –Ω–∞ –±–µ–Ω–∑–∏–Ω–µ/—Å—Ç—Ä–∞—Ö–æ–≤–∫–µ
      }

      // Health insurance
      if (choice === 'accept' && scenario.id === 3) state.healthInsurance = true;
      
      // Utility optimize
      if (scenario.id === 5 && choice === 'accept') {
        state.utilitySmart = true;
        state.monthlyExpenses -= 10000; // —ç–∫–æ–Ω–æ–º–∏—è
      }
      
      // side job
      if (scenario.id === 8 && choice === 'decline') {
        setTimeout(() => {
          state.balance += 45000;
          state.totalIncome += 45000;
          refreshUI();
          feedbackArea.innerHTML += '<br>üíº –ü–æ–¥—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∏–Ω–µ—Å–ª–∞ 45 000 ‚Ç∏';
        }, 200);
      }

      refreshUI();
      updateAdviceAndAchievements();
    }

    // ---------- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ—à–µ–Ω–∏—è ----------
    function handleDecision(scenario, choice) {
      // –£–¥–∞–ª—è–µ–º —Å—Ü–µ–Ω–∞—Ä–∏–π –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
      const idx = availableScenarios.findIndex(s => s.id === scenario.id);
      if (idx !== -1) availableScenarios.splice(idx, 1);
      
      // –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã
      applyScenarioEffects(scenario, choice);
      
      state.day += 1;
      
      // –ï–∂–µ–º–µ—Å—è—á–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å (—Å–∏–º—É–ª—è—Ü–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö —Ç—Ä–∞—Ç)
      let dailyExpense = Math.round(state.monthlyExpenses / 30);
      state.balance -= dailyExpense;
      state.totalExpense += dailyExpense;
      
      // –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
      let decisionText = scenario[choice].text;
      feedbackArea.innerHTML = `‚úÖ –í—ã –≤—ã–±—Ä–∞–ª–∏: ${decisionText}. –ë—é–¥–∂–µ—Ç –æ–±–Ω–æ–≤–ª—ë–Ω.`;
      
      refreshUI();
      updateAdviceAndAchievements();
      
      if (state.day <= MAX_DAY && availableScenarios.length > 0) {
        renderEvent();
      } else {
        eventContainer.innerHTML = `<div class="event-card"><h3>üèÅ –ú–µ—Å—è—Ü –∑–∞–≤–µ—Ä—à—ë–Ω</h3><p>–ò—Ç–æ–≥–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: ${formatKZT(state.balance)}. –í—ã –ø–æ–≤—ã—Å–∏–ª–∏ —Ñ–∏–Ω.–≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å!</p></div>`;
      }
    }

    // ---------- –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è ----------
    function renderEvent() {
      if (availableScenarios.length === 0 || state.day > MAX_DAY) return;
      
      const randomIndex = Math.floor(Math.random() * availableScenarios.length);
      const scenario = availableScenarios[randomIndex];
      
      const card = document.createElement('div');
      card.className = 'event-card';
      card.innerHTML = `
        <div class="event-header">
          <span class="event-category"><i class="fas fa-tag"></i> ${scenario.category}</span>
        </div>
        <div class="event-title">${scenario.title}</div>
        <div class="event-desc">${scenario.description}</div>
        <div class="event-impact">
          <span class="impact-item"><i class="fas fa-arrow-up"></i> ${scenario.accept.text}</span>
          <span class="impact-item"><i class="fas fa-arrow-down"></i> ${scenario.decline.text}</span>
        </div>
        <div class="btn-group">
          <button class="btn btn-accept" id="acceptEvent"><i class="fas fa-check"></i> ${scenario.accept.text}</button>
          <button class="btn btn-decline" id="declineEvent"><i class="fas fa-times"></i> ${scenario.decline.text}</button>
        </div>
        <p style="margin-top:14px; background: #c6e6e0; padding:10px; border-radius:20px; font-size:0.85rem;"><i class="fas fa-book-open"></i> –°–æ–≤–µ—Ç: ${scenario.advice}</p>
      `;
      
      eventContainer.innerHTML = '';
      eventContainer.appendChild(card);
      
      document.getElementById('acceptEvent').addEventListener('click', () => handleDecision(scenario, 'accept'));
      document.getElementById('declineEvent').addEventListener('click', () => handleDecision(scenario, 'decline'));
    }

    // ---------- –†–µ—Å—Ç–∞—Ä—Ç ----------
    function restartGame() {
      state = {
        balance: INITIAL_BALANCE,
        day: 1,
        totalIncome: 0,
        totalExpense: 0,
        deposit: 0,
        educationFund: 0,
        monthlyExpenses: MONTHLY_EXPENSE,
        passiveIncomePerDay: 0,
        futureIncomeBoost: 0,
        healthInsurance: false,
        carOwned: true,
        utilitySmart: false,
        scenariosUsed: [],
        maxDays: MAX_DAY
      };
      
      availableScenarios = SCENARIOS.map(s => ({ ...s }));
      refreshUI();
      renderEvent();
      updateAdviceAndAchievements();
      feedbackArea.innerHTML = 'üí¨ –ù–æ–≤–∞—è –∏–≥—Ä–∞. –£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–µ–º–µ–π–Ω—ã–º –±—é–¥–∂–µ—Ç–æ–º –≤ —Ç–µ–Ω–≥–µ. –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å ‚Äî –∫–ª—é—á –∫ —Å–≤–æ–±–æ–¥–µ.';
    }

    // ---------- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ----------
    function init() {
      availableScenarios = SCENARIOS.map(s => ({ ...s }));
      refreshUI();
      renderEvent();
      updateAdviceAndAchievements();
      
      restartButton.addEventListener('click', restartGame);
    }

    init();
  })();
</script>
</body>
</html>
